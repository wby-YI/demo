{"remainingRequest":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\src\\views\\product\\Spu\\SkuForm\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\src\\views\\product\\Spu\\SkuForm\\index.vue","mtime":1652976758879},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652600907899},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1652600964560},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652600907899},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1652600973833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2t1Rm9ybSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v5a2Y5YKo5Zu+54mH55qE5L+h5oGvCiAgICAgIHNwdUltYWdlTGlzdDogW10sCiAgICAgIC8v5a2Y5YKo6ZSA5ZSu5piv5bGe5oCnCiAgICAgIHNwdVNhbGVBdHRyTGlzdDogW10sCiAgICAgIC8v5a2Y5YKo5bmz5Y+w5bGe5oCn55qE5pWw5o2uCiAgICAgIGF0dHJJbmZvTGlzdDogW10sCiAgICAgIC8v5pS26ZuGc2t15pWw5o2u55qE5a2X5q61CiAgICAgIHNrdUluZm86IHsKICAgICAgICAvL+esrOS4gOexu+aUtumbhueahOaVsOaNru+8mueItue7hOS7tue7meeahOaVsOaNrgogICAgICAgIGNhdGVnb3J5M0lkOiAwLAogICAgICAgIHNwdUlkOiAwLCAgLy9zcHXnmoRpZAogICAgICAgIHRtSWQ6IDAsICAvL+WTgeeJjOeahGlkCiAgICAgICAgLy/nrKzkuoznsbvvvJrpnIDopoHpgJrov4fmlbDmja7lj4zlkJHnu5Hlrpp2LW1vZGVs5pS26ZuGCiAgICAgICAgc2t1TmFtZTogIiIsICAvL3NrdeWQjeWtlwogICAgICAgIHByaWNlOiAwLCAgLy/ku7fmoLwKICAgICAgICB3ZWlnaHQ6ICIiLCAgLy/ph43ph48KICAgICAgICBza3VEZXNjOiAiIiwgIC8v5o+P6L+wCiAgICAgICAgLy/nrKzkuInnsbvvvJrpnIDopoHoh6rlt7Hkuablhpnku6PnoIEKICAgICAgICAvL+m7mOiupOWbvueJhwogICAgICAgIHNrdURlZmF1bHRJbWc6ICIiLAogICAgICAgIC8v5pS26ZuG5Zu+54mH55qE5a2X5q61CiAgICAgICAgc2t1SW1hZ2VMaXN0OiBbCiAgICAgICAgICAvLyB7CiAgICAgICAgICAvLyAgIGlkOiAwLAogICAgICAgICAgLy8gICBpbWdOYW1lOiAic3RyaW5nIiwKICAgICAgICAgIC8vICAgaW1nVXJsOiAic3RyaW5nIiwKICAgICAgICAgIC8vICAgaXNEZWZhdWx0OiAic3RyaW5nIiwKICAgICAgICAgIC8vICAgc2t1SWQ6IDAsCiAgICAgICAgICAvLyAgIHNwdUltZ0lkOiAwLAogICAgICAgICAgLy8gfSwKICAgICAgICBdLAogICAgICAgIC8v5bmz5Y+w5bGe5oCnCiAgICAgICAgc2t1QXR0clZhbHVlTGlzdDogWwogICAgICAgICAgLy8gewogICAgICAgICAgLy8gICBhdHRySWQ6IDAsCiAgICAgICAgICAvLyAgIHZhbHVlSWQ6IDAsCiAgICAgICAgICAvLyB9LAogICAgICAgIF0sCiAgICAgICAgLy/plIDllK7lsZ7mgKcKICAgICAgICBza3VTYWxlQXR0clZhbHVlTGlzdDogWwogICAgICAgICAgLy8gewogICAgICAgICAgLy8gICBpZDogMCwKICAgICAgICAgIC8vICAgc2FsZUF0dHJJZDogMCwKICAgICAgICAgIC8vICAgc2FsZUF0dHJOYW1lOiAic3RyaW5nIiwKICAgICAgICAgIC8vICAgc2FsZUF0dHJWYWx1ZUlkOiAwLAogICAgICAgICAgLy8gICBzYWxlQXR0clZhbHVlTmFtZTogInN0cmluZyIsCiAgICAgICAgICAvLyAgIHNrdUlkOiAwLAogICAgICAgICAgLy8gICBzcHVJZDogMCwKICAgICAgICAgIC8vIH0sCiAgICAgICAgXSwKCgogICAgICB9LAogICAgICBzcHU6e30sCiAgICAgIC8v5pS26ZuG5Zu+54mH55qE5pWw5o2u5a2X5q61OuS9huaYr+mcgOimgeazqOaEj++8jOaUtumbhueahOaVsOaNruebruWJjee8uuWwkWlzRGVmYXVsdOWtl+aute+8jOWwhuadpeaPkOS6pOe7meacjeWKoeWZqOaVsOaNrueahOaXtuWAme+8jOmcgOimgeaVtOeQhuWPguaVsAogICAgICBpbWFnZUxpc3Q6W10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPllNrdUZvcm3mlbDmja4KICAgIGFzeW5jIGdldERhdGEoY2F0ZWdvcnkxSWQsIGNhdGVnb3J5MklkLCBzcHUpIHsKICAgICAgLy/mlLbpm4bniLbnu4Tku7bnu5nkuojnmoTmlbDmja4KICAgICAgdGhpcy5za3VJbmZvLmNhdGVnb3J5M0lkID0gc3B1LmNhdGVnb3J5M0lkOwogICAgICB0aGlzLnNrdUluZm8uc3B1SWQgPSBzcHUuaWQ7CiAgICAgIHRoaXMuc2t1SW5mby50bUlkID0gc3B1LnRtSWQ7CiAgICAgIHRoaXMuc3B1ID0gc3B1OwogICAgICAvL+iOt+WPluWbvueJh+eahOaVsOaNrgogICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy4kQVBJLnNwdS5yZXFTcHVJbWFnZUxJc3Qoc3B1LmlkKTsKICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDIwMCkgewogICAgICAgIGxldCBsaXN0ID0gcmVzdWx0LmRhdGE7CiAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgaXRlbS5pc0RlZmF1bHQgPSAwOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuc3B1SW1hZ2VMaXN0ID0gbGlzdDsKICAgICAgfQogICAgICAvL+iOt+WPlumUgOWUruWxnuaAp+eahOaVsOaNrgogICAgICBsZXQgcmVzdWx0MSA9IGF3YWl0IHRoaXMuJEFQSS5zcHUucmVxU3B1U2FsZUF0dHJMaXN0KHNwdS5pZCk7CiAgICAgIGlmIChyZXN1bHQxLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5zcHVTYWxlQXR0ckxpc3QgPSByZXN1bHQxLmRhdGE7CiAgICAgIH0KICAgICAgLy/ojrflj5blubPlj7DlsZ7mgKfnmoTmlbDmja4KICAgICAgbGV0IHJlc3VsdDIgPSBhd2FpdCB0aGlzLiRBUEkuc3B1LnJlcUF0dHJJbmZvTGlzdCgKICAgICAgICBjYXRlZ29yeTFJZCwKICAgICAgICBjYXRlZ29yeTJJZCwKICAgICAgICBzcHUuY2F0ZWdvcnkzSWQKICAgICAgKTsKICAgICAgaWYgKHJlc3VsdDIuY29kZSA9PSAyMDApIHsKICAgICAgICB0aGlzLmF0dHJJbmZvTGlzdCA9IHJlc3VsdDIuZGF0YTsKICAgICAgfQogICAgfSwKICAgIC8vdGFibGXooajmoLzlpI3pgInmoYbmjInpkq7nmoTkuovku7YKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShwYXJhbXMpewogICAgICAgLy/ojrflj5bliLDnlKjmiLfpgInkuK3lm77niYfnmoTkv6Hmga/mlbDmja7vvIzkvYbmmK/pnIDopoHms6jmhI/vvIzlvZPliY3mlLbpm4bnmoTmlbDmja7lvZPkuK3vvIznvLrlsJFpc0RlZmF1bHTlrZfmrrUKICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gcGFyYW1zOwogICAgfSwKICAgIC8v5o6S5LuW5pON5L2cCiAgICBjaGFuZ2VEZWZhdWx0KHJvdyl7CiAgICAgIC8v5Zu+54mH5YiX6KGo55qE5pWw5o2u55qEaXNEZWZhdWx05a2X5q615Y+Y5Li6IDAKICAgICAgdGhpcy5zcHVJbWFnZUxpc3QuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICBpdGVtLmlzRGVmYXVsdCA9IDA7CiAgICAgIH0pOwogICAgICAvL+eCueWHu+eahOmCo+S4quWbvueJh+eahOaVsOaNruWPmOS4ujEKICAgICAgcm93LmlzRGVmYXVsdCA9IDE7CiAgICAgIC8v5pS26ZuG6buY6K6k5Zu+54mH55qE5Zyw5Z2ACiAgICAgIHRoaXMuc2t1SW5mby5za3VEZWZhdWx0SW1nID0gcm93LmltZ1VybDsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq7nmoTlm57osIMKICAgIGNhbmNlbCgpewogICAgICAvL+iHquWumuS5ieS6i+S7tu+8jOiuqeeItue7hOS7tuWIh+aNouWcuuaZrzAKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlU2NlbmVzJywwKTsKICAgICAgLy/muIXpmaTmlbDmja4KICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLl9kYXRhLHRoaXMuJG9wdGlvbnMuZGF0YSgpKTsKICAgIH0sCiAgICAvL+S/neWtmOaMiemSrueahOS6i+S7tgogICBhc3luYyBzYXZlKCl7CiAgICAgIC8v5pW055CG5Y+C5pWwCiAgICAgIC8v5pW055CG5bmz5Y+w5bGe5oCnCiAgICAgIGNvbnN0IHthdHRySW5mb0xpc3Qsc2t1SW5mbyxzcHVTYWxlQXR0ckxpc3QsaW1hZ2VMaXN0fSA9IHRoaXM7CiAgICAgIC8v5pW055CG5bmz5Y+w5bGe55qE5pWw5o2uCiAgICAgc2t1SW5mby5za3VBdHRyVmFsdWVMaXN0ID0gYXR0ckluZm9MaXN0LnJlZHVjZSgocHJldixpdGVtKT0+ewogICAgICAgICBpZihpdGVtLmF0dHJJZEFuZFZhbHVlSWQpewogICAgICAgICAgIGNvbnN0IFthdHRySWQsdmFsdWVJZF0gID0gaXRlbS5hdHRySWRBbmRWYWx1ZUlkLnNwbGl0KCI6Iik7CiAgICAgICAgICAgIHByZXYucHVzaCh7YXR0cklkLHZhbHVlSWR9KTsKICAgICAgICAgfQogICAgICAgICByZXR1cm4gcHJldjsKICAgICAgfSxbXSk7CiAgICAgIC8v5pW055CG6ZSA5ZSu5bGe5oCnCiAgICAgc2t1SW5mby5za3VTYWxlQXR0clZhbHVlTGlzdCA9IHNwdVNhbGVBdHRyTGlzdC5yZWR1Y2UoKHByZXYsaXRlbSk9PnsKICAgICAgICAgaWYoaXRlbS5hdHRySWRBbmRWYWx1ZUlkKXsKICAgICAgICAgICBjb25zdCBbc2FsZUF0dHJJZCxzYWxlQXR0clZhbHVlSWRdID0gaXRlbS5hdHRySWRBbmRWYWx1ZUlkLnNwbGl0KCc6Jyk7CiAgICAgICAgICAgcHJldi5wdXNoKHtzYWxlQXR0cklkLHNhbGVBdHRyVmFsdWVJZH0pOwogICAgICAgICB9CiAgICAgICAgIHJldHVybiBwcmV2OwogICAgICB9LFtdKTsKICAgICAvL+aVtOeQhuWbvueJh+eahOaVsOaNrgogICAgIHNrdUluZm8uc2t1SW1hZ2VMaXN0ID0gaW1hZ2VMaXN0Lm1hcChpdGVtPT57CiAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgaW1nTmFtZTppdGVtLmltZ05hbWUsCiAgICAgICAgICAgaW1nVXJsOml0ZW0uaW1nVXJsLAogICAgICAgICAgIGlzRGVmYXVsdDppdGVtLmlzRGVmYXVsdCwKICAgICAgICAgICBzcHVJbWdJZDppdGVtLmlkLAogICAgICAgICB9CiAgICAgfSk7CiAgICAgLy/lj5Hor7fmsYIKICAgICBsZXQgcmVzdWx0ICA9IGF3YWl0IHRoaXMuJEFQSS5zcHUucmVxQWRkU2t1KHNrdUluZm8pOwogICAgIGlmKHJlc3VsdC5jb2RlPT0yMDApewogICAgICAgIHRoaXMuJG1lc3NhZ2Uoe3R5cGU6J3N1Y2Nlc3MnLG1lc3NhZ2U6J+a3u+WKoFNLVeaIkOWKnyd9KQogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZVNjZW5lcycsMCk7CiAgICAgfQogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/product/Spu/SkuForm","sourcesContent":["<template>\n  <div>\n    <el-form ref=\"form\" label-width=\"80px\">\n      <el-form-item label=\"SPU名称\">{{spu.spuName}}</el-form-item>\n      <el-form-item label=\"SKU名称\">\n        <el-input placeholder=\"sku名称\" v-model=\"skuInfo.skuName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"价格(元)\">\n        <el-input placeholder=\"价格(元\n        )\" type=\"number\" v-model=\"skuInfo.price\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"重量(千克)\">\n        <el-input placeholder=\"重量(千克)\" v-model=\"skuInfo.weight\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"规格描述\">\n        <el-input type=\"textarea\" rows=\"4\" v-model=\"skuInfo.skuDesc\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"平台属性\">\n        <el-form :inline=\"true\" ref=\"form\" label-width=\"80px\">\n          <el-form-item :label=\"attr.attrName\" v-for=\"(attr,index) in attrInfoList\" :key=\"attr.id\">\n            <el-select placeholder=\"请选择\" v-model=\"attr.attrIdAndValueId\">\n              <el-option :label=\"attrValue.valueName\" :value=\"`${attr.id}:${attrValue.id}`\" v-for=\"(attrValue,index) in attr.attrValueList\" :key=\"attrValue.id\"></el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </el-form-item>\n      <el-form-item label=\"销售属性\">\n        <el-form :inline=\"true\" ref=\"form\" label-width=\"80px\">\n          <el-form-item :label=\"saleAttr.saleAttrName\" v-for=\"(saleAttr,index) in spuSaleAttrList\" :key=\"saleAttr.id\">\n            <el-select placeholder=\"请选择\" v-model=\"saleAttr.attrIdAndValueId\">\n              <el-option :label=\"saleAttrValue.saleAttrValueName\" :value=\"`${saleAttr.id}:${saleAttrValue.id}`\" v-for=\"(saleAttrValue,index) in saleAttr.spuSaleAttrValueList\" :key=\"saleAttrValue.id\"></el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n      </el-form-item>\n      <el-form-item label=\"图片列表\">\n        <!-- @selection-change=\"handleSelectionChange\"  \t当选择项发生变化时会触发该事件\t  参数：selection -->\n        <el-table style=\"width: 100%\" border :data=\"spuImageList\"  @selection-change=\"handleSelectionChange\">\n          <el-table-column type=\"selection\" prop=\"prop\" width=\"80\">\n          </el-table-column>\n          <el-table-column prop=\"prop\" label=\"图片\" width=\"width\">\n             <template slot-scope=\"{row,$index}\">\n                <img :src=\"row.imgUrl\" style=\"width:100px;height:100px\">\n             </template>\n          </el-table-column>\n          <el-table-column prop=\"imgName\" label=\"名称\" width=\"width\">\n          </el-table-column>\n          <el-table-column prop=\"prop\" label=\"操作\" width=\"width\">\n              <template slot-scope=\"{row,$index}\">\n                  <el-button type=\"primary\" v-if=\"row.isDefault==0\" @click=\"changeDefault(row)\">设置默认</el-button>\n                  <el-button v-else>默认</el-button>\n              </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"save\">保存</el-button>\n        <el-button @click=\"cancel\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SkuForm\",\n  data() {\n    return {\n      //存储图片的信息\n      spuImageList: [],\n      //存储销售是属性\n      spuSaleAttrList: [],\n      //存储平台属性的数据\n      attrInfoList: [],\n      //收集sku数据的字段\n      skuInfo: {\n        //第一类收集的数据：父组件给的数据\n        category3Id: 0,\n        spuId: 0,  //spu的id\n        tmId: 0,  //品牌的id\n        //第二类：需要通过数据双向绑定v-model收集\n        skuName: \"\",  //sku名字\n        price: 0,  //价格\n        weight: \"\",  //重量\n        skuDesc: \"\",  //描述\n        //第三类：需要自己书写代码\n        //默认图片\n        skuDefaultImg: \"\",\n        //收集图片的字段\n        skuImageList: [\n          // {\n          //   id: 0,\n          //   imgName: \"string\",\n          //   imgUrl: \"string\",\n          //   isDefault: \"string\",\n          //   skuId: 0,\n          //   spuImgId: 0,\n          // },\n        ],\n        //平台属性\n        skuAttrValueList: [\n          // {\n          //   attrId: 0,\n          //   valueId: 0,\n          // },\n        ],\n        //销售属性\n        skuSaleAttrValueList: [\n          // {\n          //   id: 0,\n          //   saleAttrId: 0,\n          //   saleAttrName: \"string\",\n          //   saleAttrValueId: 0,\n          //   saleAttrValueName: \"string\",\n          //   skuId: 0,\n          //   spuId: 0,\n          // },\n        ],\n\n\n      },\n      spu:{},\n      //收集图片的数据字段:但是需要注意，收集的数据目前缺少isDefault字段，将来提交给服务器数据的时候，需要整理参数\n      imageList:[]\n    };\n  },\n  methods: {\n    //获取SkuForm数据\n    async getData(category1Id, category2Id, spu) {\n      //收集父组件给予的数据\n      this.skuInfo.category3Id = spu.category3Id;\n      this.skuInfo.spuId = spu.id;\n      this.skuInfo.tmId = spu.tmId;\n      this.spu = spu;\n      //获取图片的数据\n      let result = await this.$API.spu.reqSpuImageLIst(spu.id);\n      if (result.code == 200) {\n        let list = result.data;\n        list.forEach(item=>{\n            item.isDefault = 0;\n        });\n        this.spuImageList = list;\n      }\n      //获取销售属性的数据\n      let result1 = await this.$API.spu.reqSpuSaleAttrList(spu.id);\n      if (result1.code == 200) {\n        this.spuSaleAttrList = result1.data;\n      }\n      //获取平台属性的数据\n      let result2 = await this.$API.spu.reqAttrInfoList(\n        category1Id,\n        category2Id,\n        spu.category3Id\n      );\n      if (result2.code == 200) {\n        this.attrInfoList = result2.data;\n      }\n    },\n    //table表格复选框按钮的事件\n    handleSelectionChange(params){\n       //获取到用户选中图片的信息数据，但是需要注意，当前收集的数据当中，缺少isDefault字段\n       this.imageList = params;\n    },\n    //排他操作\n    changeDefault(row){\n      //图片列表的数据的isDefault字段变为 0\n      this.spuImageList.forEach(item=>{\n          item.isDefault = 0;\n      });\n      //点击的那个图片的数据变为1\n      row.isDefault = 1;\n      //收集默认图片的地址\n      this.skuInfo.skuDefaultImg = row.imgUrl;\n    },\n    // 取消按钮的回调\n    cancel(){\n      //自定义事件，让父组件切换场景0\n      this.$emit('changeScenes',0);\n      //清除数据\n      Object.assign(this._data,this.$options.data());\n    },\n    //保存按钮的事件\n   async save(){\n      //整理参数\n      //整理平台属性\n      const {attrInfoList,skuInfo,spuSaleAttrList,imageList} = this;\n      //整理平台属的数据\n     skuInfo.skuAttrValueList = attrInfoList.reduce((prev,item)=>{\n         if(item.attrIdAndValueId){\n           const [attrId,valueId]  = item.attrIdAndValueId.split(\":\");\n            prev.push({attrId,valueId});\n         }\n         return prev;\n      },[]);\n      //整理销售属性\n     skuInfo.skuSaleAttrValueList = spuSaleAttrList.reduce((prev,item)=>{\n         if(item.attrIdAndValueId){\n           const [saleAttrId,saleAttrValueId] = item.attrIdAndValueId.split(':');\n           prev.push({saleAttrId,saleAttrValueId});\n         }\n         return prev;\n      },[]);\n     //整理图片的数据\n     skuInfo.skuImageList = imageList.map(item=>{\n         return {\n           imgName:item.imgName,\n           imgUrl:item.imgUrl,\n           isDefault:item.isDefault,\n           spuImgId:item.id,\n         }\n     });\n     //发请求\n     let result  = await this.$API.spu.reqAddSku(skuInfo);\n     if(result.code==200){\n        this.$message({type:'success',message:'添加SKU成功'})\n        this.$emit('changeScenes',0);\n     }\n    }\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"]}]}