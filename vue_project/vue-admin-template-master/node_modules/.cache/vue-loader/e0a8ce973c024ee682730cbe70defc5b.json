{"remainingRequest":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\src\\views\\acl\\role\\list.vue?vue&type=style&index=0&id=0a57fab0&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\src\\views\\acl\\role\\list.vue","mtime":1638345809000},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1652600930386},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1652600999522},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1652600964521},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652600907899},{"path":"C:\\Users\\xiao\\Desktop\\vue_project\\vue-admin-template-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1652600973833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVkaXQtaW5wdXQgewogIHBhZGRpbmctcmlnaHQ6IDEwMHB4Owp9Ci5jYW5jZWwtYnRuIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDE1cHg7CiAgdG9wOiAxMHB4Owp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/acl/role","sourcesContent":["<template>\n  <div>\n    <el-form inline>\n      <el-form-item>\n        <el-input v-model=\"tempSearchObj.roleName\" placeholder=\"角色名称\"/>\n      </el-form-item>\n\n      <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"search\">查询</el-button>\n      <el-button @click=\"resetSearch\">清空</el-button>\n    </el-form>\n\n    <div style=\"margin-bottom: 20px\">\n      <el-button type=\"primary\"  @click=\"addRole\">添加</el-button>\n      <el-button type=\"danger\" @click=\"removeRoles()\" :disabled=\"selectedRoles.length === 0\">批量删除</el-button>\n    </div>\n\n    <el-table\n      border\n      stripe\n      style=\"width: 960px\"\n      v-loading=\"listLoading\"\n      :data=\"roles\"\n      @selection-change=\"handleSelectionChange\">\n\n      <el-table-column\n        type=\"selection\"\n        width=\"55\" />\n\n      <el-table-column\n        type=\"index\"\n        label=\"序号\"\n        width=\"80\"\n        align=\"center\">\n      </el-table-column>\n\n      <el-table-column label=\"角色名称\">\n        <template slot-scope=\"{row}\">\n          <template v-if=\"row.edit\">\n            <el-input v-model=\"row.roleName\" class=\"edit-input\" size=\"small\" />\n            <el-button\n              class=\"cancel-btn\"\n              size=\"small\"\n              icon=\"el-icon-refresh\"\n              type=\"warning\"\n              @click=\"cancelEdit(row)\"\n            >\n              取消\n            </el-button>\n          </template>\n          <span v-else>{{ row.roleName }}</span>\n        </template>\n      </el-table-column>\n      \n      <el-table-column label=\"操作\" width=\"300\" align=\"center\">\n        <template slot-scope=\"{row}\">\n          <HintButton size=\"mini\" type=\"info\" icon=\"el-icon-info\" title=\"分配权限\"\n            @click=\"$router.push(`/acl/role/auth/${row.id}?roleName=${row.roleName}`)\"/>\n\n          <HintButton size=\"mini\" type=\"primary\" icon=\"el-icon-check\" title=\"确定\" \n            @click=\"updateRole(row)\" v-if=\"row.edit\"/>\n          <HintButton size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" title=\"修改角色\" \n            @click=\"row.edit= true\" v-if=\"!row.edit\"/>\n\n            \n          <HintButton size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" title=\"删除角色\"\n            @click=\"removeRole(row)\"/>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"page\"\n      :total=\"total\"\n      :page-size=\"limit\"\n      :page-sizes=\"[5, 10, 20, 30, 40, 50, 100]\"\n      style=\"padding: 20px 0;\"\n      layout=\"prev, pager, next, jumper, ->, sizes, total\"\n      @current-change=\"getRoles\"\n      @size-change=\"handleSizeChange\"\n    />\n  </div>\n</template>\n\n<script>\n\nexport default {\n\n  name: 'RoleList',\n\n  data() {\n    return {\n      listLoading: true, // 数据是否正在加载\n      roles: [], // 角色列表\n      total: 0, // 总记录数\n      page: 1, // 当前页码\n      limit: 5, // 每页记录数\n      tempSearchObj: { // 收集搜索条件数据\n        roleName: '',\n      },\n      searchObj: { // 发送请求的条件参数数据\n        roleName: '',\n      },\n      selectedRoles: [] // 所有选中的角色列表\n    }\n  },\n\n  mounted() {\n    this.getRoles()\n  },\n\n  methods: {\n\n    /* \n    取消修改\n    */\n    cancelEdit(role) {\n      role.roleName = role.originRoleName\n      role.edit = false\n      this.$message.warning('取消角色修改')\n    },\n\n    /* \n    更新角色\n    */\n    updateRole (role) {\n      this.$API.role.updateById({id: role.id, roleName: role.roleName})\n        .then(result => {\n          this.$message.success(result.message|| '更新角色成功!')\n          this.getRoles(this.page)\n        })\n    },\n\n    /* \n    每页数量发生改变的监听\n    */\n    handleSizeChange(pageSize) {\n      this.limit = pageSize\n      this.getRoles()\n    },\n\n    /* \n    添加角色\n    */\n    addRole(){\n      // 显示添加界面\n      this.$prompt('请输入新名称', '添加角色', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n      }).then(({ value }) => {\n        this.$API.role.save({roleName: value}).then(result => {\n          this.$message.success(result.message || '添加角色成功')\n          this.getRoles()\n        })\n      }).catch(() => {\n        this.$message.warning('取消添加')\n      })\n    },\n\n    /* \n    异步获取角色分页列表\n    */\n    getRoles(page = 1) {\n      this.page = page\n      this.listLoading = true\n      const {limit, searchObj} = this\n      this.$API.role.getPageList(page, limit, searchObj).then(\n        result => {\n          const {items, total} = result.data\n          this.roles = items.map(item => {\n            item.edit = false // 用于标识是否显示编辑输入框的属性\n            item.originRoleName = item.roleName // 缓存角色名称, 用于取消\n            return item\n          })\n          this.total = total\n        }\n      ).finally(() => {\n        this.listLoading = false\n      })\n    },\n\n    /* \n    根据搜索条件进行搜索\n    */\n    search () {\n      this.searchObj = {...this.tempSearchObj}\n      this.getRoles()\n    },\n\n    /* \n    重置查询表单搜索列表\n    */\n    resetSearch() {\n      this.tempSearchObj = {\n        roleName: ''\n      }\n      this.searchObj = {\n        roleName: ''\n      }\n      this.getRoles()\n    },\n\n    /* \n    删除指定的角色\n    */\n    removeRole ({id, roleName}) {\n      this.$confirm(`确定删除 '${roleName}' 吗?`, '提示', {\n        type: 'warning'\n      }).then(async () => {\n        const result = await this.$API.role.removeById(id)\n        this.getRoles(this.roles.length===1 ? this.page-1 : this.page)\n        this.$message.success(result.message || '删除成功!')\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n\n    /* \n    当表格复选框选项发生变化的时候触发\n    */\n    handleSelectionChange(selection) {\n      this.selectedRoles = selection\n    },\n\n    /* \n    批量删除\n    */\n    removeRoles () {\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(async () => {\n        const ids = this.selectedRoles.map(role => role.id)\n        const result = await this.$API.role.removeRoles(ids)\n        this.getRoles()\n        this.$message({\n          type: 'success',\n          message: '批量删除成功!'\n        })\n      }).then((result) => {\n        \n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.edit-input {\n  padding-right: 100px;\n}\n.cancel-btn {\n  position: absolute;\n  right: 15px;\n  top: 10px;\n}\n</style>"]}]}